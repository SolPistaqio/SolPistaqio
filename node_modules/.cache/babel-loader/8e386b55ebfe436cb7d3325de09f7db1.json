{"ast":null,"code":"var _jsxFileName = \"/Users/sol/Documents/projects/react/Sol/portrolio/portfolio/src/components/Parks and weather/parks.js\";\nimport React from 'react';\nimport { getVenues, getForecast, getPhotos } from './apisearch.js';\nimport './parks.css';\n\nclass RenderWalk extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      city: 'Riga',\n      venues: [],\n      forecast: {},\n      searched: false,\n      pic: ''\n    };\n    this.handleData = this.handleData.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleEnter = this.handleEnter.bind(this);\n  }\n\n  handleData(e) {\n    // console.log(e.target.value);\n    const searchCity = e.target.value;\n    this.setState({\n      city: searchCity\n    });\n  }\n\n  search(city) {\n    // console.log('searching for ' + city);\n    this.setState({\n      searched: false,\n      venues: []\n    });\n    getVenues(city).then(vResult => {\n      if (vResult !== undefined && vResult !== {}) {\n        this.setState({\n          venues: vResult,\n          searched: true\n        });\n      } else {\n        this.setState({\n          venues: []\n        });\n        alert('Please try entering city again');\n      }\n    });\n  }\n\n  setForecast(vResult) {\n    this.setState({\n      forecast: vResult\n    });\n  }\n\n  handleEnter(e) {\n    const city = this.state.city;\n\n    if (e.key === 'Enter') {\n      //console.log('search on Enter for '+ city);\n      this.search(this.state.city);\n    }\n  }\n\n  handleClick(e) {\n    e.preventDefault();\n    this.search(this.state.city);\n  }\n\n  render() {\n    if (this.state.venues.length > 0 && this.state.searched) {\n      // console.log(this.state.venues);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        className: \"parks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Enter a city where you want to walk in\"), React.createElement(\"input\", {\n        onChange: this.handleData,\n        onKeyPress: this.handleEnter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Search\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(RenderVenue, {\n        setForecast: this.setForecast,\n        venues: this.state.venues,\n        forecast: this.state.forecast,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      })));\n    } else if (this.state.venues.length < 1 && this.state.searched) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Sorry, there are no parks there\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Please try again.\"), React.createElement(\"div\", {\n        className: \"parks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Enter a city where you want to walk in\"), React.createElement(\"input\", {\n        onChange: this.handleData,\n        onKeyPress: this.handleEnter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Search\")));\n    } else {\n      return React.createElement(\"div\", {\n        className: \"parks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Enter a city where you want to walk in\"), React.createElement(\"input\", {\n        onChange: this.handleData,\n        onKeyPress: this.handleEnter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Search\"));\n    }\n  }\n\n}\n\n;\n\nclass RenderPark extends React.Component {\n  render() {\n    // console.log('all parks incoming')\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.props.venues.map(park => {\n      const href = 'https://maps.google.com/?q=' + park.location.lat + ',' + park.location.lng;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        key: toString(park.name),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \" \", park.name, \" \", React.createElement(\"a\", {\n        href: href,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Directions->\"), \" \"));\n    })));\n  }\n\n}\n\nclass RenderWeather extends React.Component {\n  timeConverter(UNIX_timestamp) {\n    const a = new Date(UNIX_timestamp * 1000);\n    const hour = a.getHours();\n    const min = a.getMinutes() < 10 ? '0' + a.getMinutes() : a.getMinutes();\n    const time = hour + ':' + min;\n    return time;\n  }\n\n  render() {\n    console.log(this.props.weather);\n\n    if (this.props.weather === {}) {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Weather report is not available for this city\");\n    } else if (this.props.weather.weather[0]) {\n      const src = 'https://openweathermap.org/img/wn/' + this.props.weather.weather[0].icon + '@2x.png';\n      return React.createElement(\"div\", {\n        className: \"weather\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: src,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, this.props.weather.weather[0].main, \" \", Math.floor(this.props.weather.main.temp - 273.15), \"C\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Sunset \", this.timeConverter(this.props.weather.sys.sunset), \" PM\"))))));\n    } else {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Weather report is not available for this city\");\n    }\n  }\n\n}\n\n;\n\nclass RenderVenue extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pic: '',\n      weather: {},\n      s: false\n    };\n  }\n\n  componentDidMount() {\n    // console.log('here comes the photo!')\n    getPhotos(this.props.venues[0].id).then(pResult => this.setState({\n      pic: pResult\n    })); //  console.log('control forecast incoming')         \n\n    getForecast(this.props.venues[0].location.city).then(vResult => this.setState({\n      weather: vResult,\n      s: true\n    }));\n  }\n\n  render() {\n    //const src = 'https://openweathermap.org/img/wn/'+this.props.forecast.weather[0].icon+'@2x.png';\n    //const href = 'https://maps.google.com/?q=' +this.props.venues[0].location.lat+ ','+ this.props.venues[0].location.lng;\n    //const photo = this.props.venues[0].photo;\n    const city = this.props.venues[0].location.city; // console.log(this.state.weather);\n\n    if (this.state.s) {\n      return React.createElement(\"div\", {\n        className: \"parks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, city, \" \")), React.createElement(RenderWeather, {\n        className: \"weather\",\n        weather: this.state.weather // weather={this.props.forecast}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"parkinfo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.pic,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(RenderPark, {\n        venues: this.props.venues,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      })))))));\n    } else {\n      return React.createElement(\"div\", {\n        className: \"parks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, city, \" \")), React.createElement(\"div\", {\n        className: \"parkinfo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.pic,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(RenderPark, {\n        venues: this.props.venues,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      })))))));\n    }\n  }\n\n}\n\n;\nexport default RenderWalk;","map":{"version":3,"sources":["/Users/sol/Documents/projects/react/Sol/portrolio/portfolio/src/components/Parks and weather/parks.js"],"names":["React","getVenues","getForecast","getPhotos","RenderWalk","Component","constructor","props","state","city","venues","forecast","searched","pic","handleData","bind","handleClick","handleEnter","e","searchCity","target","value","setState","search","then","vResult","undefined","alert","setForecast","key","preventDefault","render","length","RenderPark","map","park","href","location","lat","lng","toString","name","RenderWeather","timeConverter","UNIX_timestamp","a","Date","hour","getHours","min","getMinutes","time","console","log","weather","src","icon","main","Math","floor","temp","sys","sunset","RenderVenue","s","componentDidMount","id","pResult"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {getVenues, getForecast, getPhotos} from './apisearch.js';\nimport './parks.css';\n\n\nclass RenderWalk extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            city : 'Riga',\n            venues : [],\n            forecast : {},\n            searched: false,\n            pic: ''\n      };\n      this.handleData=this.handleData.bind(this);\n      this.handleClick=this.handleClick.bind(this);\n      this.handleEnter=this.handleEnter.bind(this);\n      }\n      handleData(e){\n       // console.log(e.target.value);\n        const searchCity = e.target.value;\n        this.setState({\n            city: searchCity\n        });\n      }\n      \n\n      search(city){\n       // console.log('searching for ' + city);\n       \n        this.setState({\n            searched: false,\n            venues : [],\n              })\n        \n        getVenues(city).then(vResult => {\n            if (vResult !== undefined && vResult !== {}){\n       this.setState({\n           venues : vResult, \n           searched: true,\n             })}\n            else {\n                this.setState({\n                    venues : [],\n                      })\n                alert('Please try entering city again');\n            \n        }});\n        \n      }\n\n      setForecast(vResult){\n          this.setState(\n            {forecast : vResult}\n          )\n      }\n      \n      handleEnter(e){\n         const city = this.state.city\n         if (e.key === 'Enter') {\n            //console.log('search on Enter for '+ city);\n            this.search(this.state.city);\n          } \n      }\n      \n      handleClick(e){ \n        e.preventDefault();\n        this.search(this.state.city);\n           \n      }\n      \n    render(){\n         if(this.state.venues.length>0 && this.state.searched) {\n           // console.log(this.state.venues);\n            return (<div> <div className='parks'>\n                <h2>Enter a city where you want to walk in</h2>\n                <input onChange={this.handleData} onKeyPress={this.handleEnter}/>\n            <button onClick={this.handleClick}>Search</button>\n            </div><div>\n                <RenderVenue setForecast={this.setForecast} venues={this.state.venues} forecast = {this.state.forecast}/>\n            </div>\n            </div>)\n        } else if (this.state.venues.length < 1 && this.state.searched) {\n                return (<div>\n                <p>Sorry, there are no parks there</p>\n                <p>Please try again.</p>\n            <div className='parks'>\n             <h2>Enter a city where you want to walk in</h2>\n            <input onChange={this.handleData} onKeyPress={this.handleEnter}/>\n            <button onClick={this.handleClick}>Search</button>\n            </div>\n            </div>)\n            }\n        else {\n            return (<div className='parks'>\n             <h2>Enter a city where you want to walk in</h2>\n            <input onChange={this.handleData} onKeyPress={this.handleEnter}/>\n            <button onClick={this.handleClick}>Search</button>\n            </div>)\n    }}\n\n};\n\nclass RenderPark extends React.Component {\n    render(){\n       // console.log('all parks incoming')\n        return (<div>\n            <ul>\n            {this.props.venues.map(park => {\n                const href = 'https://maps.google.com/?q=' +park.location.lat+ ','+ park.location.lng; \n                return <div> \n                    \n                <li key={toString(park.name)}> {park.name} <a href={href} target='_blank'rel=\"noopener noreferrer\">Directions-></a> </li>\n                </div>\n            })}\n        </ul>\n        </div>)\n    \n}}\n\nclass RenderWeather extends React.Component {\n    timeConverter(UNIX_timestamp){\n        const a = new Date(UNIX_timestamp * 1000);\n        const hour = a.getHours();\n        const min = a.getMinutes() < 10 ? '0' + a.getMinutes() : a.getMinutes(); \n        const time = hour + ':' + min;\n        return time;\n      }\n    \n    render(){\n      console.log(this.props.weather);\n        if(this.props.weather === {}){\n            return <p>Weather report is not available for this city</p>\n        } else if (this.props.weather.weather[0]){\n            const src = 'https://openweathermap.org/img/wn/'+this.props.weather.weather[0].icon+'@2x.png';\n            return ( <div className='weather'>\n<table >\n        <tbody>\n        <tr>\n        <td><img src={src} /></td>\n        <td>\n        <p>{this.props.weather.weather[0].main} {Math.floor(this.props.weather.main.temp- 273.15)}C</p>\n        <p>Sunset {this.timeConverter(this.props.weather.sys.sunset)} PM</p>\n        </td>\n        </tr>\n        </tbody>\n </table>\n            </div>\n            )\n        }else{\n            return <p>Weather report is not available for this city</p>\n        }\n    }\n};\n\nclass RenderVenue extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            pic: '',\n            weather: {},\n            s: false\n      }\n    }\n\n      componentDidMount(){\n       // console.log('here comes the photo!')\n        getPhotos(this.props.venues[0].id).then(pResult =>\n            this.setState({\n                pic : pResult\n                  })); \n        \n      //  console.log('control forecast incoming')         \n        getForecast(this.props.venues[0].location.city).then(vResult => \n            this.setState({\n            weather: vResult,\n            s: true\n        }))\n        \n        \n      }\n        \nrender(){\n    //const src = 'https://openweathermap.org/img/wn/'+this.props.forecast.weather[0].icon+'@2x.png';\n    //const href = 'https://maps.google.com/?q=' +this.props.venues[0].location.lat+ ','+ this.props.venues[0].location.lng;\n    //const photo = this.props.venues[0].photo;\n    const city = this.props.venues[0].location.city;\n  // console.log(this.state.weather);\n   \n   if (this.state.s)\n    {return (<div className='parks'>\n    <div className='title'><h3 >{city} </h3></div>\n    <RenderWeather className='weather' weather={this.state.weather}\n   // weather={this.props.forecast}\n    />\n      <div className='parkinfo' >\n       <table  >\n        <tbody>\n        <tr>\n        <td><img src={this.state.pic} /></td>\n        <td>\n         \n       <RenderPark venues={this.props.venues}/>\n        </td>\n        </tr>\n        </tbody>\n        </table>  \n        </div>\n    </div>)}\n    else {\n        return (<div className='parks'>\n    <div className='title'><h3 >{city} </h3></div>\n      <div className='parkinfo' >\n       <table  >\n        <tbody>\n        <tr>\n        <td><img src={this.state.pic} /></td>\n        <td>\n         \n       <RenderPark  venues={this.props.venues}/>\n        </td>\n        </tr>\n        </tbody>\n        </table>  \n        </div>\n    </div>)\n    }\n}\n};\nexport default RenderWalk;\n"]},"metadata":{},"sourceType":"module"}